!(function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("wgnhs-router"),require("lit-element"),require("wgnhs-common"),require("wgnhs-styles"),require("wgnhs-layout")):"function"==typeof define&&define.amd?define(["exports","wgnhs-router","lit-element","wgnhs-common","wgnhs-styles","wgnhs-layout"],e):e((t=t||self).app={},t["wgnhs-router"],t["wgnhs-common"],t["wgnhs-common"],t["wgnhs-common"],t["wgnhs-layout"])})(this,function(t,e,i,s,a,o){"use strict";const n={Conductivity_uS:["var(--map-bin-blue-0)","var(--map-bin-blue-1)","var(--map-bin-blue-2)","var(--map-bin-blue-3)","var(--map-bin-blue-4)","var(--map-bin-blue-5)","var(--map-bin-blue-6)"],Discharge_cfs:["var(--map-bin-purple-0)","var(--map-bin-purple-1)","var(--map-bin-purple-2)","var(--map-bin-purple-3)","var(--map-bin-purple-4)","var(--map-bin-purple-5)","var(--map-bin-purple-6)"],Water_Temp_C:["var(--map-bin-green-0)","var(--map-bin-green-1)","var(--map-bin-green-2)","var(--map-bin-green-3)","var(--map-bin-green-4)","var(--map-bin-green-5)","var(--map-bin-green-6)"],pH:["var(--map-bin-brown-0)","var(--map-bin-brown-1)","var(--map-bin-brown-2)","var(--map-bin-brown-3)","var(--map-bin-brown-4)","var(--map-bin-brown-5)","var(--map-bin-brown-6)"]},r={Conductivity_uS:[[],[],[0,300],[300,502],[502,676],[676,926],[926,2e3]],Discharge_cfs:[[.1,.2],[.2,.5],[.5,1],[1,2],[2],[2,5],[5,20]],Water_Temp_C:[[5,6],[6,7],[7,8],[8,9],[9,10],[10,13],[13,17]],pH:[[],[5.5,6.5],[6.5,7],[7,7.5],[7.5,8],[8,9],[9,10]]},l=L.CircleMarker.extend({getEvents:function(){return{zoomend:this._restyle,normalpoints:this._normal,typepoints:this._orifice,condpoints:this._conductivity,qpoints:this._discharge}},_restyle:function(t){this.setRadius(l.calcRadius(t.target.getZoom()))},_normal:function(){let t="var(--map-symbol)";this._activeBackup?this._activeBackup=t:this.setStyle({color:t})},_orifice:function(){var t="var(--map-symbol)";"seepage/filtration"===this.feature.properties.Orifice_Geom&&(t="var(--map-symbol-alt)"),this._activeBackup?this._activeBackup=t:this.setStyle({color:t})},_conductivity:function(){this._binPoint("Conductivity_uS")},_discharge:function(){this._binPoint("Discharge_cfs")},_binPoint:function(t){let e=l.binPoint(t,this.feature.properties);this._activeBackup?this._activeBackup=e:this.setStyle({color:e})},highlight:function(){this._activeBackup=this.options.color,this.setStyle({color:"var(--map-symbol-active"})},removeHighlight:function(){this._activeBackup&&(this.setStyle({color:this._activeBackup}),this._activeBackup=null)}});l.calcRadius=(t=>Math.max(Math.floor(t/1.5),3)),l.binPoint=((t,e)=>{let i="#406058";const s=r[t];if(s){const a=e[t];for(let e=0;e<s.length;e++)s[e]&&a>s[e][0]&&a<=s[e][1]&&(i=n[t][e])}return i});const c="AAPK2e0a5cf929c34c46a7e4272f2ead6aa4ilvTW75nWcHxARC1ZF--cRIhmfhAJcsRkjdmZQr6C2CDqUxeqMF1yu6E7qzaEq_q";class d{constructor(t,e,i){this._springPhotos=e,this._springSketches=i,this._aggrKeys=["Site_Code","Conductivity_uS","Discharge_cfs","pH","Water_Temp_C"],this.aggrData=d._gatherAggrData(t,this._aggrKeys)}async lookupPhotos(t){const e=this._springPhotos;return new Promise(function(i,s){e.query().where("Site_Code = '"+t+"'").run(function(t,e){if(t)s(t);else{var a=e.features.map(function(t){return t.properties});a.sort(function(t,e){return t.Image_Number-e.Image_Number}),i(a)}})})}async lookupSketches(t){const e=this._springSketches;return new Promise(function(i,s){e.query().where("File_Prefix = '"+t+"'").run(function(t,e){if(t)s(t);else{var a=e.features.map(function(t,e){return t.properties.FileURL});i(a)}})})}static _gatherAggrData(t,e){const i={aggr:{},data:[]};return t.eachFeature(function(t,s){let a={};e.forEach(function(e){a[e]=t.feature.properties[e],i.aggr[e]||(i.aggr[e]={}),a[e]&&"number"==typeof a[e]&&((!i.aggr[e].max||i.aggr[e].max<a[e])&&(i.aggr[e].max=a[e]),(!i.aggr[e].min||i.aggr[e].min>a[e])&&(i.aggr[e].min=a[e]))}),i.data.push(a)}),i}}const h=function(t){return t?t.toFixed(2):null},p=["OBJECTID","GlobalID","File_Prefix","Site_Code","SpringID","Surveyor","Time","County","Horz_Precision_m","Max_PDOP","Access","Ease_Access","Notes","gps_time_date","sat_signals"],u={pH:{title:"pH",desc:"Measured as close to spring source as possible."},Conductivity_uS:{title:"Specific conductance (µS/cm, 25°C)",desc:"Specific Conductance: Measured as close to spring source as possible (µmho/cm)."},Water_Temp_C:{title:"Temperature (°C)",desc:"Measured as close to spring source as possible (°C)."},SpringID:{title:"Spring ID",desc:"Unique identifier within county."},County:{title:"County",desc:"County where spring is located."},Surveyor:{title:"Surveyor(s)",desc:"Who conducted the survey (initials)."},Date:{title:"Date",desc:"Date of field survey.",transform:function(t){return t?new Date(t).toISOString().substring(0,10):null}},Time:{title:"Time",desc:"Start time."},Easting_WTM:{title:"Easting (WTM)",desc:"Easting (WTM). As close to the spring source as possible.",transform:h},Northing_WTM:{title:"Northing (WTM)",desc:"Northing (WTM). As close to the spring source as possible.",transform:h},Horz_Precision_m:{title:"Horizontal Precision (meters)",desc:"Horizontal accuracy of GPS position (meters)."},Max_PDOP:{title:"Maximum PDOP",desc:"Maximum positional dilution of precision (PDOP) during measurement."},Elevation_m:{title:"Elevation (meters)",desc:"From digital elevation model (DEM) (meters).",transform:h},elevation_source:{title:"Elevation Source",desc:"DEM source and horizontal resolution of DEM used to extract elevation."},Land_Owner:{title:"Land Ownership",desc:"List: state, county, city, NPS, USFS, tribal, military, private, other."},Access:{title:"Access",desc:"Directions to springs."},Ease_Access:{title:"Ease of Access",desc:"List: Easy access, Difficult access, Terrain prohibits access to other potential spring areas."},Land_Cover:{title:"Land Cover",desc:"List: urban, residential, agriculture, grassland, forest, open water, wetland, barren, shrubland, other."},Air_Temp_F:{title:"Air Temperature (°F)",desc:"Air temperature on date surveyed (°F)."},Cloud_Cover_percent:{title:"Cloud Cover (%)",desc:"Cloud cover at time of survey (%)."},Wind_Speed_mph:{title:"Wind Speed (mph)",desc:"Velocity measurement on date surveyed (mph)."},Aspect_degrees:{title:"Aspect",desc:"Direction that the spring orifice faces."},Slope_degrees:{title:"Slope (°)",desc:"Channel slope (°)."},Slope_Variability:{title:"Slope Variability",desc:"List: high, medium, low, none."},Condition:{title:"Condition",desc:"List: undisturbed, light, moderate, high."},Type_of_Disturbance:{title:"Type of Disturbance",desc:"List: wildlife, livestock, recreation, diversion, residence, impounded, dredging, flooding, trails, roadway, invasives, spring house, encased, raceways, human-made structure, trash, storm-water, drain tile, agriculture, other."},Spring_Area_sqm:{title:"Spring Area (m²)",desc:"List: <2 m², 2-10 m², 10-100 m², 100-1000 m², 1000-10,000 m², 10,000-100,000 m²"},Surface_Types:{title:"Surface Type(s)",desc:"List: backwall, colluvial slope, sloping bedrock, pool, channel, spring mound, cave, other."},Width_ft:{title:"Channel or Pool Width (feet)",desc:"If a channel or pool exists, the mean width (feet)."},Width_Location:{title:"Width Location",desc:"List: pool, channel, pond, spring house, other."},Depth_cm:{title:"Channel or Pool Depth (cm)",desc:"If a channel or pool exists, the mean depth (cm)."},Depth_Location:{title:"Depth Location",desc:"List: pool, channel, pond, spring house, other."},Percent_organic:{title:"Percent Organic",desc:"Qualitative estimate of the % organics. Described as close to spring source as possible."},Percent_fines:{title:"Percent Fines",desc:"Qualitative estimate of the % fines. Described as close to spring source as possible."},Percent_sand:{title:"Percent Sand",desc:"Qualitative estimate of the % sand. Described as close to spring source as possible."},Percent_gravel:{title:"Percent Gravel",desc:"Qualitative estimate of the % gravel. Described as close to spring source as possible."},Percent_cobble:{title:"Percent Cobble",desc:"Qualitative estimate of the % cobble. Described as close to spring source as possible."},Percent_boulder:{title:"Percent Boulder",desc:"Qualitative estimate of the % boulder. Described as close to spring source as possible."},Percent_bedrock:{title:"Percent Bedrock",desc:"Qualitative estimate of the % bedrock. Described as close to spring source as possible."},Bedrock_Comp:{title:"Bedrock Composition",desc:"List: shale, siltstone, sandstone, conglomerate, limestone, dolomite, igneous or metamorphic, NA, other."},Spring_Type:{title:"Spring Type",desc:"List: helocrene, rheocrene, limnocrene, hillslope spring, cased, flowing well, other."},Spring_Source:{title:"Spring Source",desc:"List: single orifice, multiple orifices, diffuse flow, other."},Orifice_Geom:{title:"Orifice Geomorphic Type",desc:"List: seepage/filtration, fracture, tubular, contact."},Discharge_cfs:{title:"Discharge (ft³/s)",desc:"Spring flow (ft³/s)."},Flow_Accuracy:{title:"Flow Accuracy",desc:"Level of accuracy of flow measurement, List: low, high"},Discharge_Meas:{title:"How Measured",desc:"List: timed volume, float velocity method, flume, AA meter, AD meter (acoustic Doppler meter), EM meter (electromagnetic meter)."},Flow_Location:{title:"Flow Location",desc:"Where flow was measured."},Flow_percent:{title:"Flow %",desc:"Percent of flow captured (%)."},Veg_Bed_Cover_percent:{title:"Vegetative Bed Cover (%)",desc:"The proportion of the spring pool bed or channel bed that is covered by live vegetation (%)."},Veg_Bank_Cover_percent:{title:"Vegetative Bank Cover (%)",desc:"The proportion of the spring pool banks or channel banks that is covered by live vegetation (%)."},Notes:{title:"Notes",desc:"Other notes as necessary."},GlobalID:{title:"Global ID",desc:"Automatically generated unique and global ID"},gps_time_date:{title:"GPS time and date",desc:"Automatically generated GPS time and date stamp"},sat_signals:{title:"Number of satellites",desc:"Automatically generated number of satellites visible"}};customElements.define("site-bed-materials",class extends i.LitElement{static get properties(){return{siteinfo:Object}}constructor(){super()}static get styles(){return i.css`text{font-size:var(--font-size-small);font-weight:700;fill:#414c43}.container{display:flex;flex-direction:column;align-items:center}`}render(){return i.html`<div class=container><svg id=bed-materials-chart></svg></div>`}firstUpdated(){this.chart=d3.select(this.renderRoot.querySelector("#bed-materials-chart"))}updated(){var t=Math.min(500,300)/2-30;this.chart.attr("width",500).attr("height",300);var e=this.chart.append("g").attr("transform","translate(250,150)"),i=e.append("g").attr("class","donutSegments"),s=(e.append("g").attr("class","chartLabels"),e.append("g").attr("class","leaderLines"),[{material:"organic",percent:this.siteinfo.Percent_organic,color:"#406058"},{material:"fines",percent:this.siteinfo.Percent_fines,color:"#adcaba"},{material:"sand",percent:this.siteinfo.Percent_sand,color:"#b7b098"},{material:"gravel",percent:this.siteinfo.Percent_gravel,color:"#cccccc"},{material:"cobble",percent:this.siteinfo.Percent_cobble,color:"#7b6888"},{material:"boulder",percent:this.siteinfo.Percent_boulder,color:"#514b47"},{material:"bedrock",percent:this.siteinfo.Percent_bedrock,color:"#98abc5"}]),a=d3.pie().sort(null).value(function(t){return t.percent})(s).filter(function(t){return t.value>0}),o=d3.arc().outerRadius(t).innerRadius(t-45).padAngle(.025);function n(t){return t.startAngle+(t.endAngle-t.startAngle)/2}i.selectAll("path").data(a).enter().append("path").attr("d",o).attr("fill",function(t){return t.data.color}).style("opacity",1);var r=d3.arc().innerRadius(1.1*t).outerRadius(1.1*t);this.chart.select(".chartLabels").selectAll("text").data(a).enter().append("text").html(function(t){return t.data.percent+"% "+t.data.material}).attr("dy",".35em").attr("transform",function(e){var i=r.centroid(e);return i[0]=1.15*t*(n(e)<Math.PI?1:-1),"translate("+i+")"}).style("text-anchor",function(t){return n(t)<Math.PI?"start":"end"}),this.chart.select(".leaderLines").selectAll("polyline").data(a).enter().append("polyline").attr("stroke","#333333").attr("stroke-width",1).style("fill","none").attr("points",function(e){var i=r.centroid(e);return i[0]=1.1*t*(n(e)<Math.PI?1:-1),[o.centroid(e),r.centroid(e),i]})}}),d3.selection.prototype.moveToFront=function(){return this.each(function(){this.parentNode.appendChild(this)})},d3.selection.prototype.moveToBack=function(){return this.each(function(){var t=this.parentNode.firstChild;t&&this.parentNode.insertBefore(this,t)})};const g={attributeKey:"Discharge_cfs",tickValues:[0,.1,.2,.5,1,2,5,10,20],chartMin:0,chartMax:20,domain:[0,.1,.2,.5,1,2,5,10,20],labelFormat:".1f"},m={attributeKey:"Conductivity_uS",tickValues:[0,250,500,750,1e3,1250,1500,1750],chartMin:0,chartMax:1750,domain:[0,1750],labelFormat:"d"},v={attributeKey:"Water_Temp_C",tickValues:[5,7,9,11,13,15,17],chartMin:5,chartMax:17,domain:[5,17],labelFormat:"d"},b={attributeKey:"pH",tickValues:[5.5,6,6.5,7,7.5,8,8.5,9,9.5,10],chartMin:5.5,chartMax:10,domain:[5.5,10],labelFormat:".1f"};customElements.define("site-water-quality",class extends i.LitElement{static get properties(){return{siteinfo:{type:Object,attribute:!1},alldata:{type:Object,attribute:!1}}}constructor(){super()}static get styles(){return i.css`.container{display:flex;flex-direction:column;align-items:center}`}render(){return i.html`<div class=container><dot-plot .options=${g} .annotated=${this.annotated} .alldata=${this.alldata}></dot-plot><dot-plot .options=${m} .annotated=${this.annotated} .alldata=${this.alldata}></dot-plot><dot-plot .options=${v} .annotated=${this.annotated} .alldata=${this.alldata}></dot-plot><dot-plot .options=${b} .annotated=${this.annotated} .alldata=${this.alldata}></dot-plot></div>`}get annotated(){return this.siteinfo.Site_Code}});customElements.define("dot-plot",class extends i.LitElement{static get properties(){return{alldata:{type:Object,attribute:!1},options:{type:Object,attribute:!1},annotated:{type:String,attribute:!1}}}constructor(){super()}static get styles(){return[...a.styles,i.css`.label{font-weight:700}.tick{font-size:13px;color:#777}.tick line{stroke:#777}.annotation{font-size:14px}.annotated{stroke-width:2;stroke:#333;opacity:1;fill:#000}.highlighted{stroke-width:2;stroke:#000;opacity:1}`]}render(){return i.html`<svg></svg>`}firstUpdated(){this.d3svg=d3.select(this.renderRoot.querySelector("svg"))}updated(t){(t.has("alldata")||t.has("options"))&&this.options&&this.alldata&&(this.plot=new f(this.d3svg,this.options,this.alldata),this.plot.draw()),this.plot&&t.has("annotated")&&this.annotated&&this.plot.annotate(this.annotated)}});class f{constructor(t,e,i){this.options=e,this.svg=t,this.allData=i,this.svgWidth=400,this.svgHeight=140,this.margin={top:50,right:20,bottom:50,left:20},this.chartWidth=this.svgWidth-this.margin.left-this.margin.right,this.chartHeight=this.svgHeight-this.margin.top-this.margin.bottom,this.tickPadding=10}get x_scale(){var t=[];return this.options.domain.forEach((e,i)=>{t.push(this.chartWidth*i/(this.options.domain.length-1))}),d3.scaleLinear().domain(this.options.domain).range(t)}get y_scale(){return d3.scaleBand().domain([""]).rangeRound([0,this.chartHeight])}draw(){var t=this.options;this.svg.attr("width",this.svgWidth).attr("height",this.svgHeight);var e=this.svg.append("g").attr("class","chartgroup").attr("transform","translate("+this.margin.left+", "+this.margin.top+")");e.append("g").attr("class","x-axis").attr("transform","translate(0,"+this.chartHeight+")").call(d3.axisBottom(this.x_scale).tickSizeInner(-this.chartHeight).tickSizeOuter(0).tickPadding(5).tickValues(t.tickValues).tickFormat(d3.format(this.options.labelFormat))).call(t=>t.select(".domain").remove()),e.append("g").attr("class","y-axis").call(d3.axisLeft(this.y_scale).tickSizeInner(-this.chartWidth).tickSizeOuter(0).tickPadding(0)).call(t=>t.select(".domain").remove()).call(t=>t.selectAll("text").remove()),this.circles=e.append("g").attr("class","circles");var i=this.chartHeight-this.tickPadding;this.circles.selectAll("g").data(this.allData,t=>t.Site_Code).enter().append("g").attr("class","datapoint").append("circle").attr("cx",e=>this.x_scale(e[t.attributeKey])).attr("cy",t=>this.chartHeight/2-i/2+Math.random()*i).attr("r",3).attr("fill",e=>l.binPoint(t.attributeKey,e)).attr("stroke","#000").attr("stroke-width",0).attr("opacity","0.7").attr("class",t=>t.Site_Code).on("click",t=>{console.log("switch to "+t.Site_Code),s.dispatch(document,"interaction",{params:t})}).on("mouseenter",t=>{this.highlight(t.Site_Code)}).on("mouseleave",t=>{this.unhighlight(t.Site_Code)}).append("svg:title").text(t=>t.Site_Code)}annotate(t){var e=this.options,i=this.circles.selectAll("g").filter(e=>e.Site_Code===t).moveToFront(),s=i.select("circle").classed("annotated",!0);i.append("text").attr("dy","-0.75em").html(t=>u[e.attributeKey].title+": "+t[e.attributeKey]);i.append("polyline").attr("stroke","#333333").attr("stroke-width",3).style("fill","none").attr("points",t=>{var e=[0,0];e[0]=s.attr("cx"),e[1]=0;var i=[0,0];return i[0]=s.attr("cx"),i[1]=this.chartHeight,[e,i]}).moveToBack()}highlight(t){this.circles.selectAll("g").filter(e=>e.Site_Code===t).moveToFront().select("circle").classed("highlighted",!0)}unhighlight(t){this.circles.selectAll("g").filter(e=>e.Site_Code===t).select("circle").classed("highlighted",!1)}}customElements.define("download-section",class extends i.LitElement{static get properties(){return{file:{type:String}}}constructor(){super()}static get styles(){return[...a.styles,i.css`a{text-decoration:none}.download-button:hover{color:var(--palette-900)}.download-button:focus{outline:thin dotted}.download-button{display:flex;flex-direction:row;justify-content:space-between;align-items:center;cursor:pointer;text-align:center;background:var(--palette-white);color:var(--palette-accent);border:1px solid var(--palette-light);border-radius:var(--border-radius);padding:var(--font-size);margin:var(--border-radius) 0}.download-button>div{display:flex;align-items:center}.icon{font-size:var(--icon-size-extra-large)}`]}render(){return i.html`<a class=download-button href=${this.file} target=_blank download><div><span>Download</span></div><div><i class="icon material-icons" title=Download>save_alt</i></div></a>`}});const w="toggle-pdf-panel";customElements.define("site-sketch-button",class extends i.LitElement{static get properties(){return{src:{type:String},panel:{type:Object,attribute:!1},closed:{type:Boolean,attribute:!1}}}constructor(){super(),this.closed=!0}static get styles(){return[...a.styles,i.css``]}render(){return i.html`<app-collapsible @open=${this.toggle} button><i slot=header-before class=material-icons title="Site sketch map">picture_as_pdf</i> <span slot=header>Site sketch map</span> <i slot=header-after class=material-icons>${this.closed?"chevron_right":"chevron_left"}</i></app-collapsible>`}updated(t){(t.has("panel")||t.has("src"))&&this.panel&&this.src&&this.panel.request(this.src)}toggle(t){this.closed?this.panel.show(this.src):this.panel.hide()}handleAlt(t){t.detail.url===this.src?this.closed=!1:this.closed=!0,this.requestUpdate()}connectedCallback(){super.connectedCallback(),this.__altHandler=this.handleAlt.bind(this),document.addEventListener(w,this.__altHandler)}disconnectedCallback(){document.removeEventListener(w,this.__altHandler),super.disconnectedCallback()}}),(function(){let t;function e(e){return!!(function(){if(void 0===t){t=!1;try{const e=Object.defineProperty({},"passive",{get:()=>{t=!0}});window.addEventListener("test",null,e)}catch(t){}}return t})()&&{passive:e}}function i(t,e=t,i=t){let s=t;if(e>i)throw new RangeError(`'min' ${e} should be lower than 'max' ${i}`);return t<e&&(s=e),t>i&&(s=i),s}function s(t,e,i){i?t.setAttribute(e,""):t.removeAttribute(e)}function a(t,e){return t.hasAttribute(e)}function o(t,e,i){t.setAttribute(e,i)}function n(t,e,i=0){const s=t.getAttribute(e);return null===s?i:parseInt(s,10)}function r(t){if("touchstart"===t.type||"touchmove"===t.type||"touchend"===t.type){const e=t.targetTouches[0]||t.changedTouches[0];return{x:e.clientX,y:e.clientY,id:e.identifier,event:t}}return{x:t.clientX,y:t.clientY,id:null,event:t}}const l=document.createElement("template");l.innerHTML='<style>:host{position:relative;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;contain:content;-webkit-tap-highlight-color:rgba(0,0,0,0);--macro-carousel-gap:16px;--macro-carousel-background-color:transparent;--macro-carousel-slide-min-height:0px;--macro-carousel-slide-max-height:none;--macro-carousel-transition-duration:0.6s;--macro-carousel-transition-timing-function:cubic-bezier(0.25,0.46,0.45,0.94);--macro-carousel-pagination-gap:2px;--macro-carousel-pagination-height:44px;--macro-carousel-fallback-message-color-background:#fff;--macro-carousel__internal__slides-per-view:1}:host([hidden]){display:none}:host-context(.js-focus-visible) ::slotted(:focus:not(.focus-visible)),:host-context(.js-focus-visible) :focus:not(.focus-visible){outline:0}#externalWrapper{height:100%;overflow:hidden;contain:paint;background-color:var(--macro-carousel-background-color);-ms-touch-action:pan-y pinch-zoom;touch-action:pan-y pinch-zoom;cursor:-webkit-grab;cursor:grab}#externalWrapper:active{cursor:-webkit-grabbing;cursor:grabbing}:host([disable-drag]) #externalWrapper{cursor:default}#slidesWrapper{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;height:100%;min-height:var(--macro-carousel-slide-min-height);max-height:var(--macro-carousel-slide-max-height);will-change:transform}:host([transitioning]) #slidesWrapper{-webkit-transition-property:-webkit-transform;transition-property:-webkit-transform;transition-property:transform;transition-property:transform,-webkit-transform;-webkit-transition-duration:var(--macro-carousel-transition-duration);transition-duration:var(--macro-carousel-transition-duration);-webkit-transition-timing-function:var(--macro-carousel-transition-timing-function);transition-timing-function:var(--macro-carousel-transition-timing-function)}#slidesWrapper ::slotted(*){-webkit-box-flex:0;-ms-flex-positive:0;flex-grow:0;-ms-flex-negative:0;flex-shrink:0;-ms-flex-preferred-size:calc((100% - (var(--macro-carousel__internal__slides-per-view) - 1) * var(--macro-carousel-gap)) / var(--macro-carousel__internal__slides-per-view));flex-basis:calc((100% - (var(--macro-carousel__internal__slides-per-view) - 1) * var(--macro-carousel-gap)) / var(--macro-carousel__internal__slides-per-view));min-height:var(--macro-carousel-slide-min-height);max-height:var(--macro-carousel-slide-max-height);margin-right:var(--macro-carousel-gap);overflow:hidden;outline:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.slidesFallback{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;margin:0;padding:.5em 1em;width:100%;background-color:var(--macro-carousel-fallback-message-color-background)}:host([disable-drag]) #slidesWrapper ::slotted(*){-webkit-user-select:auto;-moz-user-select:auto;-ms-user-select:auto;user-select:auto}#pagination{display:none}:host([pagination]) #pagination{-ms-flex-item-align:center;align-self:center;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;width:100%;height:var(--macro-carousel-pagination-height);contain:strict;font-size:0}div ::slotted(macro-carousel-pagination-indicator){margin:0 calc(var(--macro-carousel-pagination-gap) / 2);padding:0;font-size:inherit;opacity:.8}div ::slotted(macro-carousel-pagination-indicator.selected),div ::slotted(macro-carousel-pagination-indicator:hover){opacity:1}#navigation{display:none}:host([navigation]) #navigation{display:block}div ::slotted(macro-carousel-nav-button){position:absolute;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%)}:host([pagination]) div ::slotted(macro-carousel-nav-button){top:calc(50% - var(--macro-carousel-pagination-height) / 2)}div ::slotted(.macro-carousel-previous){left:0}div ::slotted(.macro-carousel-next){right:0}#aria-live ::slotted(*){position:absolute;height:1px;width:1px;margin:-1px;padding:0;clip:rect(0 0 0 0);overflow:hidden;border:0}@media print{#slidesWrapper ::slotted(*){margin-right:0;margin-bottom:.2em;outline:1px solid #000;color:#000;page-break-inside:avoid}:host([navigation]) #navigation,:host([pagination]) #pagination{display:none}#slidesWrapper{display:block;-webkit-transform:none!important;transform:none!important;-webkit-transition:0s;transition:0s}}</style> <div id="externalWrapper"> <div id="slidesWrapper"> <slot id="slidesSlot"> <p class="slidesFallback">No content available</p> </slot> </div> </div> <div id="navigation"> <slot id="navigationSlot" name="navigationSlot"></slot> </div> <div id="pagination"> <slot id="paginationSlot" name="paginationSlot"></slot> </div> <div id="aria-live"> <slot id="ariaSlot" name="ariaSlot"></slot> </div> ',window.ShadyCSS&&window.ShadyCSS.prepareTemplate(l,"macro-carousel");const c=Math.abs((35,Math.round(100*Math.tan(35*Math.PI/180))/100));window.customElements.define("macro-carousel",class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(l.content.cloneNode(!0)),this.t=this.shadowRoot.querySelector("#externalWrapper"),this.i=this.shadowRoot.querySelector("#slidesWrapper"),this.s=this.shadowRoot.querySelector("#slidesSlot"),this.e=this.shadowRoot.querySelector("#ariaSlot"),this.o=this.shadowRoot.querySelector("#paginationSlot"),this.a=[],this.n=this.shadowRoot.querySelector("#navigationSlot"),this.r=void 0,this.h=void 0,this.c=[],this.l=-1,this.d=!1,this.u=0,this.m=0,this.g=0,this.p=0,this.b=0,this.v=0,this.w=void 0,this.f=!1,this.k=!1,this._=void 0,this.S=void 0,this.z=void 0,this.M=void 0,this.C=void 0,this.W=void 0,this.P=void 0,this.L=void 0,this.G=[],this.F=!1,this.I=50,this.$=20,this.A=.7,this.D=.04,this.T=0,this.N=!1}connectedCallback(){window.ShadyCSS&&window.ShadyCSS.styleElement(this),this.hasAttribute("role")||this.setAttribute("role","list"),this.j("selected"),this.j("loop"),this.j("navigation"),this.j("pagination"),this.j("disableDrag"),this.j("slidesPerView"),this.j("reducedMotion"),this.j("autoFocus"),this.m=this.selected,this.O(),this.s.addEventListener("slotchange",this),window.addEventListener("resize",this,e(!0)),this.addEventListener("keydown",this),window.addEventListener("touchmove",function(){}),this.q()}disconnectedCallback(){this.s.removeEventListener("slotchange",this),window.removeEventListener("resize",this),this.disableDrag||(this.t.removeEventListener("touchstart",this),this.t.removeEventListener("mousedown",this)),this.navigation&&(this.r.removeEventListener("macro-carousel-nav-button-clicked",this),this.h.removeEventListener("macro-carousel-nav-button-clicked",this)),this.pagination&&this.a.forEach(t=>{t.removeEventListener("macro-carousel-pagination-indicator-clicked",this)})}handleEvent(t){"resize"===t.type&&t.target===window?(this.B(),this.update()):"slotchange"===t.type&&t.target===this.s?this.q():"macro-carousel-pagination-indicator-clicked"===t.type&&this.pagination?this.V(t):"macro-carousel-nav-button-clicked"===t.type&&this.navigation?t.target===this.r?this.previous():t.target===this.h&&this.next():"keydown"===t.type?37===t.keyCode||38===t.keyCode?this.previous():39!==t.keyCode&&40!==t.keyCode||this.next():"transitionend"===t.type&&t.target===this.i?(this.H(),this.R(),this.X()):"touchstart"===t.type||"mousedown"===t.type?this.Y(r(t)):"touchmove"===t.type||"mousemove"===t.type?this.U(r(t)):"touchend"===t.type||"mouseup"===t.type?this.J(r(t)):"touchcancel"===t.type&&this.K()}j(t){if(this.hasOwnProperty(t)){const e=this[t];delete this[t],this[t]=e}}update(){clearTimeout(this.w),this.B(),this.w=setTimeout(()=>{this.Q()},50)}Q(){this.Z(),this.tt(),this.it(),this.st(this.c.map(t=>t.layoutIndex),!0),this.et(this.selected),this.ot(),this.at(),this.nt(),this.H(),this.X(),this.O()}previous(){this.selected=this.rt(this.selected)}rt(t){let e=t;return t>0?e=t-1:this.loop&&(this.d&&(this.u-=1),e=this.l),i(e,0,this.l)}next(){this.selected=this.ht(this.selected)}ht(t){let e=t;return t<this.l?e=t+1:this.loop&&(this.d&&(this.u+=1),e=0),i(e,0,this.l)}static get observedAttributes(){return["selected","loop","navigation","pagination","disable-drag","slides-per-view","reduced-motion","auto-focus"]}attributeChangedCallback(t,e,i){switch(0===this.c.length&&this.q(),t){case"selected":const s=parseInt(i,10);if(!Number.isFinite(s)||s>this.l||s<0)return void(this.selected=e||0);if(this.d){const t=this.selected+this.u*(this.l+1),e=this.m-t,i=[],s=e<0?this.slidesPerView+e:0;for(let a=-1;a<Math.abs(e);a++)i.push(a+t+s);this.st(i),this.m=t}this.et(this.selected),this.ot(),this.at(),this.dispatchEvent(new CustomEvent("macro-carousel-selected-changed",{detail:this.selected,bubbles:!0})),this.f||this.N||(this.H(),this.R(),this.X());break;case"loop":this.tt(),this.it(),this.st(this.c.map((t,e)=>e)),this.at(),this.ot(),this.H(),this.R(),this.X(),window.ShadyCSS&&window.ShadyCSS.styleSubtree(this);break;case"navigation":this.update(),window.ShadyCSS&&window.ShadyCSS.styleSubtree(this);break;case"pagination":this.ot(),window.ShadyCSS&&window.ShadyCSS.styleSubtree(this);break;case"disable-drag":this.nt();break;case"slides-per-view":const a=parseInt(i,10);if(!Number.isFinite(a)||a<1||a>this.c.length)return void(this.slidesPerView=e||1);this.update(),window.ShadyCSS&&window.ShadyCSS.styleSubtree(this);break;case"reduced-motion":null!==i?this.B():this.O()}}set selected(t){o(this,"selected",t)}get selected(){return n(this,"selected")}set loop(t){s(this,"loop",t)}get loop(){return a(this,"loop")}set navigation(t){s(this,"navigation",t)}get navigation(){return a(this,"navigation")}set pagination(t){s(this,"pagination",t)}get pagination(){return a(this,"pagination")}set disableDrag(t){s(this,"disable-drag",t)}get disableDrag(){return a(this,"disable-drag")}set slidesPerView(t){o(this,"slides-per-view",t)}get slidesPerView(){return n(this,"slides-per-view",1)}set reducedMotion(t){s(this,"reduced-motion",t)}get reducedMotion(){return a(this,"reduced-motion")}set autoFocus(t){s(this,"auto-focus",t)}get autoFocus(){return a(this,"auto-focus")}B(){this.f=!1,this.removeAttribute("transitioning"),this.i.removeEventListener("transitionend",this,!1)}O(){this.reducedMotion||requestAnimationFrame(()=>{requestAnimationFrame(()=>{this.f=!0,this.setAttribute("transitioning",""),this.i.addEventListener("transitionend",this,!1)})})}Z(){this.g=this.i.getBoundingClientRect().width,this.p=this.ct(),this.b=this.lt()}lt(){return(this.g-(this.slidesPerView-1)*this.p)/this.slidesPerView}ct(){/\d$/.test((function(t,e){const i=getComputedStyle(t);return String(i.getPropertyValue("--macro-carousel-gap")).trim()})(this))&&console.warn("Warning: it looks like --macro-carousel-gap has a unitless value.\nAdd CSS units to its value to avoid breaking the slides layout.");const t=parseInt(getComputedStyle(this.c[0].element)["margin-right"],10);return Number.isFinite(t)?t:0}it(){var t,e,i;t=this,e="--macro-carousel__internal__slides-per-view",i=`${this.slidesPerView}`,t.style.setProperty(e,i),window.ShadyCSS&&window.ShadyCSS.styleSubtree(t,{[e]:i}),this.l=this.d?this.c.length-1:this.dt(),!this.d&&this.selected>this.l&&(this.selected=this.l)}dt(){return Math.max(0,this.c.length-this.slidesPerView)}ut(t){let e=t;for(;e<0;)e+=this.c.length;return e%this.c.length}st(t,e=!1){let i;t.forEach(t=>{!e&&this.c.find(e=>e.layoutIndex===t)||(i=this.ut(t),this.c[i].layoutIndex=t,this.c[i].position=this.mt(t),this.c[i].element.style.transform=`translateX(${this.mt(i-t)}px)`)})}mt(t){return-t*(this.b+this.p)}gt(t){this.i.style.transform=`translate3d(${t}px, 0, 0)`,this.v=t}et(t){this.i&&!this.N&&this.gt(this.c[t].position)}R(){this.autoFocus&&this.c[this.selected].element.focus()}H(){const t=[];for(let e=0;e<this.slidesPerView;e++)t.push((this.selected+e)%this.c.length);let e;this.c.map(t=>t.element).forEach((i,s)=>{e=void 0!==t.find(t=>t===s),i.setAttribute("aria-hidden",e?"false":"true"),e?(i.removeAttribute("inert"),i.setAttribute("tabindex",-1)):i.setAttribute("inert","")})}ot(){if((!this.pagination||this.pagination&&this.o.assignedNodes().length!==this.l+1)&&(this.a.forEach(t=>{t.removeEventListener("macro-carousel-pagination-indicator-clicked",this),this.removeChild(t)}),this.a.length=0),this.pagination){if(this.o.assignedNodes().length!==this.l+1){const t=document.createDocumentFragment();for(let e=0;e<=this.l;e++){const i=document.createElement("macro-carousel-pagination-indicator");i.textContent=e,i.setAttribute("slot","paginationSlot"),i.setAttribute("aria-label",`Go to item ${e+1}`),i.addEventListener("macro-carousel-pagination-indicator-clicked",this),t.appendChild(i),this.a.push(i)}this.appendChild(t)}this.a.forEach((t,e)=>{e===this.selected?t.classList.add("selected"):t.classList.remove("selected")})}}V(t){this.selected=parseInt(t.target.textContent,10)}pt(t){const e=document.createElement("macro-carousel-nav-button");return e.classList.add(t),e.setAttribute("slot","navigationSlot"),e.addEventListener("macro-carousel-nav-button-clicked",this),/next/.test(t)&&e.setAttribute("flipped",""),e}at(){(!this.navigation||this.navigation&&2!==this.n.assignedNodes().length)&&(this.n.assignedNodes().forEach(t=>{t.removeEventListener("macro-carousel-nav-button-clicked",this),this.removeChild(t)}),this.r=void 0,this.h=void 0),this.navigation&&(2!==this.n.assignedNodes().length&&(this.r=this.pt("macro-carousel-previous"),this.appendChild(this.r),this.h=this.pt("macro-carousel-next"),this.appendChild(this.h)),this.r.disabled=!this.loop&&0===this.selected,this.h.disabled=!this.loop&&this.selected===this.l,this.r.setAttribute("aria-label",`Go to ${this.loop&&0===this.selected?"last":"previous"} item`),this.h.setAttribute("aria-label",`Go to ${this.loop&&this.selected===this.l?"first":"next"} item`))}tt(){this.d=this.loop&&this.dt()>1}bt(){return this.s.assignedNodes({flatten:!0}).forEach(t=>{t.nodeType===Node.TEXT_NODE&&t.parentNode&&t.parentNode.removeChild(t)}),this.s.assignedNodes({flatten:!0}).filter(t=>t.nodeType===Node.ELEMENT_NODE).map((t,e)=>({element:t,layoutIndex:e,position:this.mt(e)}))||[]}q(){this.c=this.bt(),this.c.forEach(t=>{t.element.hasAttribute("tabindex")||t.element.setAttribute("tabindex",-1),"list"===this.getAttribute("role")&&t.element.setAttribute("role","listitem")});const t=this.c.length>0&&-1===this.l;this.Q(),t&&(this.selected=this.selected)}X(){1!==this.e.assignedNodes().length&&(this.vt=document.createElement("div"),this.vt.setAttribute("slot","ariaSlot"),this.vt.setAttribute("aria-live","polite"),this.vt.setAttribute("aria-atomic","true"),this.appendChild(this.vt));const t=this.c[this.selected].layoutIndex;let e="";for(let i=0;i<this.slidesPerView;i++)e+=(t+i)%this.c.length+1,i<this.slidesPerView-2?e+=", ":i<this.slidesPerView-1&&(e+=" and ");this.vt.textContent=`Item${this.slidesPerView>1?"s":""} ${e} of ${this.c.length} visible`}nt(){this.disableDrag?(this.t.removeEventListener("touchstart",this),this.t.removeEventListener("mousedown",this)):(this.t.addEventListener("touchstart",this,e(!0)),this.t.addEventListener("mousedown",this,e(!0)))}Y(t){this.k||(this.N=!1,this.k=!0,this._=t.id,this.S=this.M=this.W=t.x,this.z=this.C=this.P=t.y,this.L=this.c[this.selected].layoutIndex,this.G=[],this.wt(this.M),window.addEventListener("touchmove",this,e(!1)),window.addEventListener("mousemove",this,e(!1)),window.addEventListener("mouseup",this),window.addEventListener("touchend",this),window.addEventListener("touchcancel",this))}U(t){if(this.k&&t.id===this._){this.W=t.x,this.P=t.y;const e=Math.abs(this.W-this.S),i=Math.abs(this.P-this.z);e/i>c||0===i||i>e&&i-e<5?(t.event.preventDefault(),this.wt(this.M),this.B(),this.ft()):this.K()}}J(t){this.k&&t.id===this._&&this.K()}K(){this.k=!1,this._=void 0,this.wt(this.M),window.removeEventListener("touchmove",this),window.removeEventListener("mousemove",this),window.removeEventListener("touchend",this),window.removeEventListener("mouseup",this),window.removeEventListener("touchcancel",this),this.kt()}wt(t){const e=Date.now();for(;this.G.length>0&&!(e-this.G[0].time<=100);)this.G.shift();this.G.push({x:t,time:e})}ft(){this.F||requestAnimationFrame(this.xt.bind(this)),this.F=!0}xt(){const t=this.v+this.W-this.M;let e,i;if(this.c.forEach((s,a)=>{s.position>=t&&(void 0===i||s.position<i)&&(i=s.position,e=a)}),this.d){let t;if(void 0===e){const i=this.c.slice(0).sort((t,e)=>t.layoutIndex>e.layoutIndex)[0];for(e=i.layoutIndex-1;e<0;)e+=this.c.length;e%=this.c.length,t=i.layoutIndex-2}else t=this.c[e].layoutIndex-1;const i=[],s=t+this.slidesPerView+2;for(let e=t;e<s;e++)i.push(e);this.st(i)}else e=e||0;this.L=this.c[e].layoutIndex,this.gt(t),this.M=this.W,this.C=this.P,this.F=!1}kt(){this.N=!0;const t=this.G[this.G.length-1],e=this.G[0],s=t.x-e.x||0;this.u=Math.floor(this.L/this.c.length);const a=this.ut(this.L);let o;if(0===s)this.T=0,o=this.c[a].position-this.v>this.b/2?this.ht(a):a;else{this.T=(function(t,e,s){if(0===t)throw new RangeError("x must be different from `0`");return t/Math.abs(t)*i(Math.abs(t),e,s)})(s,this.$,this.I);let t=1;const e=.5*this.g;for(;Math.abs(s)>e*t&&t<this.slidesPerView+2;)t+=1;s>0&&(t-=1);let n=a;for(let e=0;e<t;e++)n=s<0?this.ht(n):this.rt(n);o=n}this.selected=i(o,0,this.l),requestAnimationFrame(this.yt.bind(this))}yt(){if(!this.N)return;const t=this.c[this.selected].position;this.T+=this.D*(t-this.v),this.T*=this.A;const e=this.v+this.T;(Math.abs(t-e)>=1||Math.abs(this.T)>=1)&&!this.reducedMotion?(this.gt(e),requestAnimationFrame(this.yt.bind(this))):(this.gt(t),this.N=!1,this.O(),requestAnimationFrame(()=>{this.H(),this.R(),this.X()}))}});class d extends HTMLElement{constructor(){super();const t=Object.getPrototypeOf(this).constructor.template;this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(t.content.cloneNode(!0))}connectedCallback(){window.ShadyCSS&&window.ShadyCSS.styleElement(this),this._t=0,this.hasAttribute("role")||this.setAttribute("role","button"),this.hasAttribute("tabindex")?this._t=this.getAttribute("tabindex"):this.setAttribute("tabindex",this._t),this.j("disabled"),this.addEventListener("keydown",this),this.addEventListener("click",this)}j(t){if(this.hasOwnProperty(t)){const e=this[t];delete this[t],this[t]=e}}static get observedAttributes(){return["disabled"]}set disabled(t){s(this,"disabled",t)}get disabled(){return a(this,"disabled")}attributeChangedCallback(t,e,i){switch(t){case"disabled":if(e===i)return;this.disabled?(this._t=this.getAttribute("tabindex"),this.removeAttribute("tabindex"),this.setAttribute("aria-disabled","true")):(this.setAttribute("tabindex",this._t),this.setAttribute("aria-disabled","false"))}}handleEvent(t){this.disabled?t.preventDefault():"click"===t.type?this.St&&this.St():"keydown"!==t.type||32!==t.keyCode&&13!==t.keyCode||(t.preventDefault(),this.St&&this.St())}}const h=document.createElement("template");h.innerHTML='<style>:host{--macro-carousel-navigation-color:#000;--macro-carousel-navigation-color-focus:var(--macro-carousel-navigation-color);--macro-carousel-navigation-color-background:transparent;--macro-carousel-navigation-color-background-focus:#f0f0f0;--macro-carousel-navigation-button-size:48px;--macro-carousel-navigation-icon-size:24px;--macro-carousel-navigation-icon-mask:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 24 24\'%3E%3Cpath d=\'M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z\'/%3E%3C/svg%3E");position:relative;display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;min-width:var(--macro-carousel-navigation-button-size);min-height:var(--macro-carousel-navigation-button-size);border-radius:50%;overflow:hidden;cursor:pointer;contain:paint}:host([disabled]){opacity:.2}.bg,.content{position:absolute;top:0;right:0;bottom:0;left:0}.content{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;background-color:var(--macro-carousel-navigation-color-background)}.bg{z-index:0;background-color:var(--macro-carousel-navigation-color-background-focus);opacity:0;will-change:opacity}.icon{position:relative;z-index:1;width:var(--macro-carousel-navigation-icon-size);height:var(--macro-carousel-navigation-icon-size);color:var(--macro-carousel-navigation-color);background:var(--macro-carousel-navigation-icon-mask)}@supports ((-webkit-mask-image:var(--macro-carousel-navigation-icon-mask)) or (mask-image:var(--macro-carousel-navigation-icon-mask))){.icon{background:var(--macro-carousel-navigation-color);-webkit-mask-image:var(--macro-carousel-navigation-icon-mask);mask-image:var(--macro-carousel-navigation-icon-mask)}}:host([flipped]) .icon{-webkit-transform:rotate(180deg);transform:rotate(180deg)}:host(.focus-visible) .bg,:host(:active:not([disabled])) .bg,:host(:focus:not([disabled])) .bg,:host(:hover:not([disabled])) .bg{opacity:1}:host-context(.js-focus-visible):host(:focus:not(:active):not(:hover):not(.focus-visible)) .bg{opacity:0}@supports ((-webkit-mask-image:var(--macro-carousel-navigation-icon-mask)) or (mask-image:var(--macro-carousel-navigation-icon-mask))){:host(.focus-visible) .icon,:host(:active:not([disabled])) .icon,:host(:focus:not([disabled])) .icon,:host(:hover:not([disabled])) .icon{background:var(--macro-carousel-navigation-color-focus)}:host-context(.js-focus-visible):host(:focus:not(:active):not(:hover):not(.focus-visible)) .icon{background:var(--macro-carousel-navigation-color)}}</style> <div class="content"> <div class="bg"></div> <div class="icon"></div> </div> ',window.ShadyCSS&&window.ShadyCSS.prepareTemplate(h,"macro-carousel-nav-button"),window.customElements.define("macro-carousel-nav-button",class extends d{static get template(){return h}St(){this.dispatchEvent(new CustomEvent("macro-carousel-nav-button-clicked"))}});const p=document.createElement("template");p.innerHTML='<style>:host{--macro-carousel-pagination-color:#999;--macro-carousel-pagination-color-selected:#000;--macro-carousel-pagination-size-clickable:24px;--macro-carousel-pagination-size-dot:8px;--macro-carousel-pagination-border:1px solid var(--macro-carousel-pagination-color);--macro-carousel-pagination-border-selected:1px solid var(--macro-carousel-pagination-color-selected);position:relative;display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;width:var(--macro-carousel-pagination-size-clickable);height:var(--macro-carousel-pagination-size-clickable);overflow:hidden;cursor:pointer;contain:paint}.bg,.fg,:host{border-radius:50%}.bg,.fg{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);display:block;width:var(--macro-carousel-pagination-size-dot);height:var(--macro-carousel-pagination-size-dot);-webkit-box-sizing:border-box;box-sizing:border-box;background-color:var(--macro-carousel-pagination-color);content:""}.bg{-webkit-transform:translate(-50%,-50%) scale(2);transform:translate(-50%,-50%) scale(2);opacity:0;will-change:opacity}.fg{border:var(--macro-carousel-pagination-border)}:host(.focus-visible) .bg,:host(:hover) .bg{opacity:.2}:host(.selected) .fg{background-color:var(--macro-carousel-pagination-color-selected);border:var(--macro-carousel-pagination-border-selected)}</style> <div class="bg"></div> <div class="fg"></div> ',window.ShadyCSS&&window.ShadyCSS.prepareTemplate(p,"macro-carousel-pagination-indicator"),window.customElements.define("macro-carousel-pagination-indicator",class extends d{static get template(){return p}St(){this.dispatchEvent(new CustomEvent("macro-carousel-pagination-indicator-clicked"))}})})();customElements.define("modal-dialog",class extends i.LitElement{static get properties(){return{open:{type:Boolean,attribute:"open-modal",reflect:!0},source:{type:String}}}constructor(){super(),this.open=!1}static get styles(){return[...a.styles,i.css`.modal{position:fixed;background:var(--palette-accent-transparent);top:0;left:0;right:0;bottom:0;z-index:var(--z-index-interrupt);display:flex;align-items:center;justify-content:center}.modal-window{position:relative;padding:.5em;border-radius:var(--border-radius);background:var(--palette-light)}.modal-content{max-height:90vh;max-width:90vw}.modal-close{position:absolute;top:0;right:0;border-radius:var(--border-radius)}.control{display:flex;justify-content:center;align-items:center;font-size:var(--icon-size-large);color:var(--palette-accent);text-align:center;cursor:pointer;padding:var(--border-radius);background-color:var(--palette-light);border:none;border-radius:50%}[data-closed]{display:none}`]}render(){return i.html`<div class="modal b-close-modal" role=dialog aria-hidden=true ?data-closed=${!this.open} @click=${this.handleClick}><div class=modal-window><button class="control modal-close b-close-modal"><i class="material-icons b-close-modal" title=Hide>close</i></button> ${this.source?i.html`<img class=modal-content src=${this.source}>`:""}</div></div>`}toggleOpen(){this.open=!this.open}handleClick(t){t.target.classList.contains("b-close-modal")&&this.toggleOpen()}});customElements.define("site-photos",class extends i.LitElement{static get properties(){return{photos:Array,clickedImg:{type:String,attribute:!1},printLayout:{type:Boolean,attribute:"print-layout"}}}constructor(){super()}static get styles(){return i.css`macro-carousel{padding:0 3em;max-width:75vw;margin:0 auto}.slide{min-height:40vh;display:flex;align-items:center;justify-content:center}.slide[data-compact]{max-height:40vh}.slide img{max-width:100%}.text{background-color:var(--palette-accent-transparent);color:var(--palette-white);position:absolute;left:0;width:100%}.text p{margin:0 1em}.title{top:0}.caption{bottom:0;max-height:calc(var(--line-height) * 3);overflow:hidden}`}render(){return i.html`${this.photos?i.html`<macro-carousel navigation pagination><slot>${this.photos.map(t=>t.FileURL?i.html`<div class=slide title="Double-click to expand" ?data-compact=${!this.printLayout}><img src=${t.FileURL} alt=${t.Description} @dblclick=${this.handleImageClick}> ${t.Image_Number?i.html`<div class="title text"><p>PP${t.Image_Number}</p></div>`:""} ${t.Description?i.html`<div class="caption text"><p>${t.Description}</p></div>`:""}</div>`:"")}</slot></macro-carousel><modal-dialog></modal-dialog>`:""}`}firstUpdated(){this.$modal=this.renderRoot.querySelector("modal-dialog")}handleImageClick(t){this.clickedImg=t.target.src,this.$modal.source=this.clickedImg,this.$modal.toggleOpen()}});class y extends i.LitElement{static get properties(){return{siteinfo:{type:Object,attribute:!1},photos:{type:Array,attribute:!1},pdfpanel:{type:Object,attribute:!1},pdfsrc:{type:String},printLayout:{type:Boolean,attribute:"print-layout"},alldata:{type:Object,attribute:!1}}}constructor(){super(),this.genId=(function(){const t={};return function(e){return t[e]||(t[e]=s.genId()),t[e]}})()}static get styles(){return[...a.styles,i.css`[data-element=table]{display:grid;grid-template-columns:30% 1fr;grid-gap:.5em;width:100%}td{padding:.5em}.label{background-color:var(--palette-dark);font-weight:var(--font-weight-bold)}.detail{background-color:var(--palette-light)}.header{position:-webkit-sticky;position:sticky;top:0;background-color:var(--palette-white);padding:var(--font-size-extra-large) var(--border-radius);z-index:10;width:100%;box-sizing:border-box;display:flex;justify-content:space-between}.header h1{padding:0;max-width:70%;text-align:center}.header i{font-size:var(--icon-size-large);color:var(--palette-accent);cursor:pointer}[data-closed]{display:none}app-collapsible i{font-size:var(--icon-size-large)}app-collapsible i[slot=header-after]::after{content:"expand_more"}app-collapsible[open] i[slot=header-after]::after{content:"expand_less"}`]}get renderTable(){return Object.entries(this.siteinfo).filter((t,e)=>!p.includes(t[0])).map((t,e)=>i.html`<td class=label title=${u[t[0]]?u[t[0]].desc:t[0]}><label for=${this.genId(e)}>${u[t[0]]?u[t[0]].title:t[0]}</label></td><td class=detail title=${u[t[0]]?u[t[0]].desc:t[0]}><span id=${this.genId(e)}>${u[t[0]]&&u[t[0]].transform?u[t[0]].transform(t[1]):t[1]}</span></td>`)}render(){return i.html`${this.siteinfo?i.html`<div class=header><span><a href=${window.router.link("view",this.siteinfo)} onclick=event.preventDefault()><i class="material-icons toggle-print" title="Back to website" @click=${this.fireTogglePrint} ?data-closed=${!this.printLayout}>arrow_back</i></a> <a href=${window.router.link("entry")} onclick=event.preventDefault()><i class="material-icons clear-selection" title="Clear selection" @click=${this.fireClearSelection} ?data-closed=${this.printLayout}>arrow_back</i></a></span><h1>${this.siteinfo.County} County Spring #${this.siteinfo.SpringID}</h1><span><a href=${window.router.link("print",this.siteinfo)} onclick=event.preventDefault()><i class="material-icons toggle-print" title="Print layout" @click=${this.fireTogglePrint} ?data-closed=${this.printLayout}>zoom_out_map</i></a> <i class="material-icons print-action" title="Print this page" @click=${this.handlePrint} ?data-closed=${!this.printLayout}>print</i></span></div><site-photos .photos=${this.photos} ?print-layout=${this.printLayout}></site-photos><site-sketch-button .panel=${this.pdfpanel} src=${this.pdfsrc}></site-sketch-button><app-collapsible open><i slot=header-before class=material-icons title="Water quality">bar_chart</i> <span slot=header>Water quality</span> <i slot=header-after class=material-icons></i><div slot=content><site-water-quality .siteinfo=${this.siteinfo} .alldata=${this.alldata}></site-water-quality></div></app-collapsible><app-collapsible open><i slot=header-before class=material-icons title="Spring-bed materials">bar_chart</i> <span slot=header>Spring-bed materials</span> <i slot=header-after class=material-icons></i><div slot=content><site-bed-materials .siteinfo=${this.siteinfo}></site-bed-materials></div></app-collapsible><app-collapsible .open=${this.printLayout}><i slot=header-before class=material-icons title="All data">view_list</i> <span slot=header>All data</span> <i slot=header-after class=material-icons></i><div slot=content data-element=table>${this.renderTable}</div></app-collapsible>`:""}`}handlePrint(){window.print()}fireClearSelection(){let t=new CustomEvent("clear-selection",{bubbles:!0,detail:{}});this.dispatchEvent(t)}fireTogglePrint(){let t=new CustomEvent("toggle-print",{bubbles:!0,detail:{on:!this.printLayout,params:this.siteinfo}});this.dispatchEvent(t)}}customElements.define("site-details",y);const k="map-control",x="stylepoints",_="normal";class S extends i.LitElement{static get properties(){return{alldata:{type:Object,attribute:!1}}}constructor(){super()}static get styles(){return[...a.styles,i.css`.option-container{box-sizing:border-box;padding:var(--border-radius)}.plot-container{display:flex;flex-direction:column;align-items:center}.type-container{margin:var(--font-size)}`]}render(){return i.html`<div class=option-container><map-control-item name="Spring Type" type=type><span>About 26 percent of the springs inventoried emerge as fracture or contact springs, and 74 percent have seepage-filtration morphologies.<br><br><strong><b>Fracture spring</b></strong>—Groundwater discharges from joints or fractures in bedrock.<br><strong><b>Contact springs</b></strong>—Groundwater discharges at a stratigraphic contact, along which fractures often form.<br><strong><b>Seepage-filtration spring</b></strong>—Groundwater discharges from many small openings in permeable, unlithified material.</span><div class=type-container><div><legend-dot></legend-dot><span>Fracture or contact spring</span></div><div><legend-dot alt></legend-dot><span>Seepage-filtration morphology</span></div></div></map-control-item><map-control-item name="Discharge (ft³/s)" type=q><span>The average flow rate of the springs for which flow could be measured was 0.96 ft³/s; values ranged from 0.14 ft³/s to 18.3 ft³/s.</span><div class=plot-container><dot-plot .options=${g} .alldata=${this.alldata}></dot-plot></div></map-control-item><map-control-item name="Specific conductance (µS/cm, 25°C)" type=cond><span>Specific conductance is a general measure of the total dissolved solids in spring water. The lowest spring water conductivity values are in northern Wisconsin; the highest values are found in the southeastern part of the state.</span><div class=plot-container><dot-plot .options=${m} .alldata=${this.alldata}></dot-plot></div></map-control-item></div>`}}customElements.define("map-controls",S);customElements.define("map-control-item",class extends i.LitElement{static get properties(){return{name:{type:String},type:{type:String},selected:{type:Boolean,attribute:!1}}}constructor(){super(),this.genId=s.genId(),this.selected=!1}static get styles(){return[...a.styles,i.css`.icon{font-size:var(--icon-size-extra-large)}.icon[active]{color:var(--palette-active)}app-collapsible{--transition-duration:0;--el-header-font-weight:var(--font-weight);--el-header-font-size:var(--font-size);--el-header-background:var(--palette-white);--el-border:1px solid var(--palette-light)}[slot]{padding:var(--border-radius)}`]}render(){return i.html`<app-collapsible @open=${this.handleOpen} .open=${this.selected}><span slot=header-before>${this.name}</span> <i slot=header-after class="icon material-icons" title="View on map" ?active=${this.selected}>map</i><slot slot=content></slot></app-collapsible>`}handleOpen(t){this.selected!==t.detail.value&&s.dispatch(this.parentElement,k,{type:this.type,value:t.detail.value})}handleSelect(t){t.detail.type===this.type?(this.selected=t.detail.value,s.dispatch(document,x,{type:this.selected?this.type:_})):this.selected=!1}connectedCallback(){super.connectedCallback(),this.__selectHandler=this.handleSelect.bind(this),this.parentElement.addEventListener(k,this.__selectHandler)}disconnectedCallback(){this.parentElement.removeEventListener(k,this.__selectHandler),super.disconnectedCallback()}});customElements.define("legend-dot",class extends i.LitElement{static get properties(){return{alt:{type:Boolean}}}constructor(){super(),this.alt=!1}static get styles(){return[...a.styles,i.css`.svg-icon{display:inline-flex;align-self:center}.svg-icon svg{top:calc(var(--line-height)/ 5);position:relative}svg{width:var(--font-size);height:var(--line-height)}`]}render(){return i.html`<span class=svg-icon><svg viewBox="-4 -12 16 22"><g><path stroke=${this.color} stroke-opacity=1 stroke-width=2 stroke-linecap=round stroke-linejoin=round fill=${this.color} fill-opacity=0.2 fill-rule=evenodd d="M0,0 a4,4 0 1,0 8,0 a4,4 0 1,0 -8,0"></path></g></svg></span>`}get color(){return this.alt?"var(--map-symbol-alt)":"var(--map-symbol)"}}),window.siteMap=new class extends window.L.Evented{constructor(){super(),this.selected=!1,this._highlight=null;const t=this.map=L.map("map",{zoomControl:!1}).setView([45,-89.623861],7);function e(t){return L.esri.Vector.vectorBasemapLayer(t,{apiKey:c,version:2})}this.el=document.querySelector("#map"),new L.Control.Zoom({position:"topright"}).addTo(t);const i={"Streets Basemap":e("arcgis/streets").addTo(t),"Topographic Basemap":e("arcgis/topographic"),"Imagery Basemap":e("arcgis/imagery")};L.control.layers(i,null,{collapsed:!0}).addTo(t),this.springs=L.esri.featureLayer({url:"https://data.wgnhs.wisc.edu/arcgis/rest/services/springs/springs_inventory/MapServer/1",pointToLayer:function(e,i){return new l(i,{weight:2,color:"var(--map-symbol)",radius:l.calcRadius(t.getZoom())})}}).on("click",function(t){this._highlight!==t.propagatedFrom?this.fire("interaction",t.propagatedFrom.feature.properties):this.fire("interaction")}.bind(this)),this.springPhotos=L.esri.featureLayer({url:"https://data.wgnhs.wisc.edu/arcgis/rest/services/springs/springs_inventory/MapServer/6"}),this.springSketches=L.esri.featureLayer({url:"https://data.wgnhs.wisc.edu/arcgis/rest/services/springs/springs_inventory/MapServer/4"}),this.springs.once("load",()=>{this.fire("init")}),this.springs.addTo(t)}getPoint(t){let e;return this.springs.eachFeature(function(i){i.feature.properties.Site_Code===t.Site_Code&&(e=i)}),e}zoomToPoint(t){let e=this.getPoint(t);e&&this.map.setZoomAround(e.getLatLng(),15)}getHighlightPoint(){return this._highlight}setHighlightPoint(t){t?(this._highlight=t,this._highlight.bringToFront(),this._highlight.highlight()):this.clearSelection()}selectPoint(t){let e=null,i=this.getPoint(t);return i&&(e=i.feature.properties,i!==this.getHighlightPoint()&&(this.clearSelection(),this.setHighlightPoint(i))),e}clearSelection(){this._highlight&&(this._highlight.bringToBack(),this._highlight.removeHighlight()),this._highlight=null}updatePoints(t){this.map.fire(t)}setVisibility(t){t?(this.el.removeAttribute("data-closed"),this.map.invalidateSize()):this.el.setAttribute("data-closed",!0)}},window.sidebar=document.querySelector("#sidebar"),window.pdfPanel=document.querySelector("#sketch"),window.pdfDownload=document.querySelector("#sketch-download"),window.details=document.querySelector("#details"),window.controls=document.querySelector("#controls"),window.details.pdfpanel=window.pdfPanel,window.siteMap.once("init",function(){window.siteData=new d(window.siteMap.springs,window.siteMap.springPhotos,window.siteMap.springSketches),window.details.alldata=window.siteData.aggrData.data,window.controls.alldata=window.siteData.aggrData.data;var t=function(){window.details.siteinfo=null,window.details.photos=null,window.pdfDownload.file=null};async function i(e){return t(),Promise.all([window.siteData.lookupPhotos(e.Site_Code).catch(()=>[]),window.siteData.lookupSketches(e.Site_Code).catch(()=>[])]).then(function(t){window.details.siteinfo=e,window.details.photos=t[0],t[1]&&(window.details.pdfsrc=t[1][0],window.pdfDownload.file=t[1][0])})}window.router=new e.SiteRouter,window.router.addRoute({name:"entry",url:"/",onEnter:function(e,i){window.siteMap.clearSelection(),t(),document.querySelector("#app").setAttribute("data-view","app"),window.sidebar.switchTab("default"),window.siteMap.setVisibility(!0)},onExit:function(t,e){}}),window.router.addRoute({name:"view",url:"/view/:Site_Code",onEnter:function(t,e){let s=t.params(),a=window.siteMap.selectPoint(s);a?(window.details.printLayout=!1,i(a).then(()=>{document.querySelector("#app").setAttribute("data-view","app"),window.sidebar.switchTab("details"),window.siteMap.setVisibility(!0)})):window.router.clearRoute()},onExit:function(t,e){window.pdfPanel.hide()}}),window.router.addRoute({name:"print",url:"/print/:Site_Code",onEnter:function(t,e){let s=t.params(),a=window.siteMap.selectPoint(s);a?(window.details.printLayout=!0,i(a).then(()=>{document.querySelector("#app").removeAttribute("data-view"),window.sidebar.switchTab("details"),window.siteMap.setVisibility(!1)})):window.router.clearRoute()},onExit:function(t,e){}}),window.router.onEnterAll({},()=>{document.querySelector("#spinner").setAttribute("data-closed",!0)}),window.router.start(),window.siteMap.on("interaction",t=>{t.Site_Code?window.router.setRoute("view",t):window.router.clearRoute()})}),document.addEventListener("interaction",function(t){const e=t.detail.params;e.Site_Code?window.router.setRoute("view",e):window.router.clearRoute()}),document.addEventListener("clear-selection",function(t){window.router.clearRoute()}),document.addEventListener("toggle-print",function(t){t.detail.on?window.router.setRoute("print",t.detail.params):window.router.setRoute("view",t.detail.params)}),document.addEventListener("toggle-pdf-panel",function(t){window.siteMap.setVisibility(t.detail.closed),t.detail.closed?window.pdfPanel.setAttribute("data-closed",!0):window.pdfPanel.removeAttribute("data-closed")}),document.addEventListener("stylepoints",function(t){t.detail.type&&window.siteMap.updatePoints(t.detail.type+"points")}),t.MapControls=S,t.SiteDetails=y,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=index.min.js.map
